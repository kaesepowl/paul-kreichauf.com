language: node_js
node_js:
    - node
cache:
    yarn: true
    directories:
        - node_modules
env:
    - BUILD_DIR=packages/website
script:
    - cd $BUILD_DIR
    - yarn install
    - yarn build:static
    - PACKAGE_VERSION=$(node -p "require('./package.json').version")
deploy:
    provider: s3
    access_key_id: AKIAJOECBXHYJ2JYCJSA
    secret_access_key:
        secure: vcIzbA1cDKxHhLuCX9m9FwIwmmqnf+3Hl3dSe+yBE6ECCXXkAiM0k5DdiMaYQxESCnSl9U9UP1sZ3DQVKTtsCcdmX4UHQlyUZVQILGA8WqCqNeSoNvisHXC1ayBJpcv8R3dUaX8Ev4EXZkd4jmM3OTw2sMU2g4mmxK+atgcPgTDCAIGEuWG7R9zqQPm7iqSkpAzfDglaL+zs0GC/c7P7QwziM6OHoygMXk/CBK+LU8/rFJMLUCb62mbs8pZb6rmla7Wh4qWz/WNTBscIMdSQG2x2baTm1XpRBKMbMPDhnGkdstFp9+RY9n3+fgMiDOmUPRLpJC1H62N2YGUekCClqKHfYed4oNPUH55Gt9rplj7hYOaSxSjH360CZDf1VJ/xZ5XcastEY3GXvSb/srxGbTJbBeyF4ZK+tIvmXrho1DzxrzxIefZVWHkOoVrUvJbHxHmHkSyTjlF215ESJpj3ppfLP2FJbgXZYBD0TefwTWumYp2pdlkKPugI55GNfq3tjJHdnBPQKWfznYkHPObw12qlDnR3jESvS2WcxWhDOsD92sGMjOq+6Ast5Zf8PUI3LoubOITG9/8vx94UlybP0sUI5dE9S1Rrt+qYEo6lET5inLNgVRfEOc+6tOisvYUjk4Pg7Mp6LQ/tWIEQI8sCI38UUIZa91ymRcacdAbWD18=
    bucket: paul-kreichauf.com
    local_dir: ${TRAVIS_BUILD_DIR}/${BUILD_DIR}/build/es6-bundled
    region: eu-central-1
    skip_cleanup: true
    on:
        condition: $BUILD_DIR = packages/website
        branch: master
        repo: kaesepowl/paul-kreichauf.com
